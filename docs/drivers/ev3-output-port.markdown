---
autogen: This file was automatically generated by kernel-doc-text-to-markdown.py
title: EV3 Output Port Driver
---

Each of the four output [ports on the EV3] is treated a separate device in
the ev3dev kernel. The `ev3-output-port` driver is used by other drivers to
control the low-level hardware of the port (gpios, pwm and analog/digital
converters).

This driver is where the auto-detection for the output ports happens. The
pins of the port are monitored for changes in voltage. When a change is
detected, a series of tests are made to determine what was plugged in. The
port then configures itself to the correct mode and loads additional drivers.
Currently, this driver is only able to automatically detect the EV3/NXT
Large motor and the EV3 Medium motor. For other motor (and LED, etc.) types
the port mode must be manually set. See the sysfs attribute descriptions
below for more detailed information.

### sysfs attributes

The output ports sysfs devices can be found at `/sys/bus/legoev3/devices/out<Z>`
where `<Z>` is the letter identifier of the port (A to D) as indicated on
the EV3 itself.

`modes` (read-only)
: Returns a space separated list of all of the possible modes.

    - `auto`: (Default) Use auto-detection to detect when motors are
connected and disconnected. The appropriate motor device/driver
will be loaded.
- `ev3-tacho-motor`: Force the port to load the [ev3-tacho-motor] device.
The driver will default to the Large Motor settings.
- `rcx-motor`: Force the port to load the [rcx-motor] device. This can
be use with MINDSTORMS RCX motor, Power Functions motors and any other
'plain' DC motor. By 'plain', we mean the motor is just a motor
without any kind of controller.
- `rcx-led`: Force the port to load the [rcx-led] device. This can be
used with the MINDSTORMS RCX LED, Power Functions LEDs or any other
LED connected to pins 1 and 2 of the output port.
- `raw`: Exports gpios, pwm and analog/digital converter values to sysfs
so that they can be controlled directly.

`mode` (read/write)
: Reading returns the currently selected mode. Writing sets the mode.

`state` (read/only)
: For modes other than `auto`, it will return the same value as `mode`. In
`auto` mode it returns the mode that was determined by the auto-detection
algorithm. If no sensor is connected, it will return `no-motor`. If an
unsupported device is connected (like a sensor), it will return `error`.

`pin5_mv` (read-only)
: Only present in `raw` mode. Returns the reading of the analog/digital
converter on pin 1 in mV (0 to 5000).

[ports on the EV3]: ../legoev3-ports
[ev3-tacho-motor]: ../ev3-tacho-motor
[rcx-motor]: ../rcx-motor
[rcx-led]: ../rcx-led
